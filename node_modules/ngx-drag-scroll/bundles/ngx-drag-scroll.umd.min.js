!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-drag-scroll",["exports","@angular/core","@angular/common"],t):t((e=e||self)["ngx-drag-scroll"]={},e.ng.core,e.ng.common)}(this,function(e,t,n){"use strict";var i=function(){function e(e){this.display="inline-block",this._dragDisabled=!1,this._elementRef=e}return Object.defineProperty(e.prototype,"dragDisabled",{get:function(){return this._dragDisabled},set:function(e){this._dragDisabled=e},enumerable:!0,configurable:!0}),e.decorators=[{type:t.Directive,args:[{selector:"[drag-scroll-item]"}]}],e.ctorParameters=function(){return[{type:t.ElementRef,decorators:[{type:t.Inject,args:[t.ElementRef]}]}]},e.propDecorators={display:[{type:t.HostBinding,args:["style.display"]}],dragDisabled:[{type:t.Input,args:["drag-disabled"]}]},e}(),s=function(){function e(e,n,i){this._elementRef=e,this._renderer=n,this._document=i,this._index=0,this._scrollbarHidden=!1,this._disabled=!1,this._xDisabled=!1,this._xWheelEnabled=!1,this._yDisabled=!1,this._dragDisabled=!1,this._snapDisabled=!1,this._snapOffset=0,this._snapDuration=500,this.isPressed=!1,this.isScrolling=!1,this.scrollTimer=-1,this.scrollToTimer=-1,this.downX=0,this.downY=0,this.displayType="block",this.elWidth=null,this.elHeight=null,this.scrollbarWidth=null,this.isAnimating=!1,this.prevChildrenLength=0,this.indexBound=0,this.dsInitialized=new t.EventEmitter,this.indexChanged=new t.EventEmitter,this.reachesLeftBound=new t.EventEmitter,this.reachesRightBound=new t.EventEmitter,this.snapAnimationFinished=new t.EventEmitter,this.scrollbarWidth=this.getScrollbarWidth()+"px"}return Object.defineProperty(e.prototype,"currIndex",{get:function(){return this._index},set:function(e){e!==this._index&&(this._index=e,this.indexChanged.emit(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollbarHidden",{get:function(){return this._scrollbarHidden},set:function(e){this._scrollbarHidden=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(e){this._disabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"xDisabled",{get:function(){return this._xDisabled},set:function(e){this._xDisabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yDisabled",{get:function(){return this._yDisabled},set:function(e){this._yDisabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"xWheelEnabled",{get:function(){return this._xWheelEnabled},set:function(e){this._xWheelEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragDisabled",{get:function(){return this._dragDisabled},set:function(e){this._dragDisabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"snapDisabled",{get:function(){return this._snapDisabled},set:function(e){this._snapDisabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"snapOffset",{get:function(){return this._snapOffset},set:function(e){this._snapOffset=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"snapDuration",{get:function(){return this._snapDuration},set:function(e){this._snapDuration=e},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(){this.setScrollBar(),this.xDisabled||this.disabled?this.disableScroll("x"):this.enableScroll("x"),this.yDisabled||this.disabled?this.disableScroll("y"):this.enableScroll("y")},e.prototype.ngAfterViewInit=function(){this._renderer.setAttribute(this._contentRef.nativeElement,"drag-scroll","true"),this.displayType="undefined"!=typeof window?window.getComputedStyle(this._elementRef.nativeElement).display:"block",this._renderer.setStyle(this._contentRef.nativeElement,"display",this.displayType),this._renderer.setStyle(this._contentRef.nativeElement,"whiteSpace","noWrap"),this.markElDimension(),this._renderer.setStyle(this._contentRef.nativeElement,"width",this.elWidth),this._renderer.setStyle(this._contentRef.nativeElement,"height",this.elHeight),this.wrapper&&this.checkScrollbar(),this._onMouseDownListener=this._renderer.listen(this._contentRef.nativeElement,"mousedown",this.onMouseDownHandler.bind(this)),this._onTouchStartListener=this._renderer.listen(this._contentRef.nativeElement,"touchstart",this.onMouseDownHandler.bind(this)),this._onScrollListener=this._renderer.listen(this._contentRef.nativeElement,"scroll",this.onScrollHandler.bind(this)),this._onTouchEndListener=this._renderer.listen(this._contentRef.nativeElement,"touchend",this.onMouseUpHandler.bind(this)),this._onDragStartListener=this._renderer.listen("document","dragstart",function(e){e.preventDefault()}),this.checkNavStatus(),this.dsInitialized.emit(),this.adjustMarginToLastChild()},e.prototype.ngAfterViewChecked=function(){this._children._results.length!==this.prevChildrenLength&&(this.markElDimension(),this.checkScrollbar(),this.prevChildrenLength=this._children._results.length,this.checkNavStatus())},e.prototype.ngOnDestroy=function(){this._renderer.setAttribute(this._contentRef.nativeElement,"drag-scroll","false"),this._onMouseDownListener&&(this._onMouseDownListener=this._onMouseDownListener()),this._onTouchStartListener&&(this._onTouchStartListener=this._onTouchStartListener()),this._onScrollListener&&(this._onScrollListener=this._onScrollListener()),this._onTouchEndListener&&(this._onTouchEndListener=this._onTouchEndListener()),this._onDragStartListener&&(this._onDragStartListener=this._onDragStartListener())},e.prototype.onMouseMoveHandler=function(e){this.onMouseMove(e)},e.prototype.onMouseMove=function(e){if(this.isPressed&&!this.disabled){var t="touchmove"===e.type;if(!t){var n=e;if(!n.buttons&&!n.which)return this.onMouseUpHandler(n)}if(!this.xDisabled&&!this.dragDisabled){var i=t?e.touches[0].clientX:e.clientX;this._contentRef.nativeElement.scrollLeft=this._contentRef.nativeElement.scrollLeft-i+this.downX,this.downX=i}if(!this.yDisabled&&!this.dragDisabled){var s=t?e.touches[0].clientY:e.clientY;this._contentRef.nativeElement.scrollTop=this._contentRef.nativeElement.scrollTop-s+this.downY,this.downY=s}}},e.prototype.onMouseDownHandler=function(e){var t=this.locateDragScrollItem(e.target);if(!t||!t.dragDisabled){var n="touchstart"===e.type;if(this._startGlobalListening(n),this.isPressed=!0,n){var i=e;this.downX=i.touches[0].clientX,this.downY=i.touches[0].clientY}else{var s=e;this.downX=s.clientX,this.downY=s.clientY}clearTimeout(this.scrollToTimer)}},e.prototype.onScrollHandler=function(){var e=this;this.checkNavStatus(),this.isPressed||this.isAnimating||this.snapDisabled?this.locateCurrentIndex():(this.isScrolling=!0,clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout(function(){e.isScrolling=!1,e.locateCurrentIndex(!0)},500))},e.prototype.onMouseUpHandler=function(e){this.isPressed&&(this.isPressed=!1,this.snapDisabled?this.locateCurrentIndex():this.locateCurrentIndex(!0),this._stopGlobalListening())},e.prototype.moveLeft=function(){(0!==this.currIndex||this.snapDisabled)&&(this.currIndex--,clearTimeout(this.scrollToTimer),this.scrollTo(this._contentRef.nativeElement,this.toChildrenLocation(),this.snapDuration))},e.prototype.moveRight=function(){var e=this.wrapper||this.parentNode,t=e?e.clientWidth:0;!this.isScrollReachesRightEnd()&&this.currIndex<this.maximumIndex(t,this._children)&&(this.currIndex++,clearTimeout(this.scrollToTimer),this.scrollTo(this._contentRef.nativeElement,this.toChildrenLocation(),this.snapDuration))},e.prototype.moveTo=function(e){var t=this.wrapper||this.parentNode,n=t?t.clientWidth:0;e>=0&&e!==this.currIndex&&this.currIndex<=this.maximumIndex(n,this._children)&&(this.currIndex=Math.min(e,this.maximumIndex(n,this._children)),clearTimeout(this.scrollToTimer),this.scrollTo(this._contentRef.nativeElement,this.toChildrenLocation(),this.snapDuration))},e.prototype.checkNavStatus=function(){var e=this;setTimeout(function(){var t=Boolean(e._children._results.length<=1),n=Boolean(e._contentRef.nativeElement.scrollWidth<=e._contentRef.nativeElement.clientWidth);t||n?(e.reachesLeftBound.emit(!0),e.reachesRightBound.emit(!0)):e.isScrollReachesRightEnd()?(e.reachesLeftBound.emit(!1),e.reachesRightBound.emit(!0)):0===e._contentRef.nativeElement.scrollLeft&&e._contentRef.nativeElement.scrollWidth>e._contentRef.nativeElement.clientWidth?(e.reachesLeftBound.emit(!0),e.reachesRightBound.emit(!1)):(e.reachesLeftBound.emit(!1),e.reachesRightBound.emit(!1))},0)},e.prototype.onWheel=function(e){this._xWheelEnabled&&(e.preventDefault(),this._snapDisabled?this._contentRef.nativeElement.scrollBy(e.deltaY,0):e.deltaY<0?this.moveLeft():e.deltaY>0&&this.moveRight())},e.prototype.onWindowResize=function(){this.refreshWrapperDimensions()},e.prototype._startGlobalListening=function(e){if(!this._onMouseMoveListener){var t=e?"touchmove":"mousemove";this._onMouseMoveListener=this._renderer.listen("document",t,this.onMouseMoveHandler.bind(this))}if(!this._onMouseUpListener){t=e?"touchend":"mouseup";this._onMouseUpListener=this._renderer.listen("document",t,this.onMouseUpHandler.bind(this))}},e.prototype._stopGlobalListening=function(){this._onMouseMoveListener&&(this._onMouseMoveListener=this._onMouseMoveListener()),this._onMouseUpListener&&(this._onMouseUpListener=this._onMouseUpListener())},e.prototype.disableScroll=function(e){this._renderer.setStyle(this._contentRef.nativeElement,"overflow-"+e,"hidden")},e.prototype.enableScroll=function(e){this._renderer.setStyle(this._contentRef.nativeElement,"overflow-"+e,"auto")},e.prototype.hideScrollbar=function(){"none"===this._contentRef.nativeElement.style.display||this.wrapper||(this.parentNode=this._contentRef.nativeElement.parentNode,this.wrapper=this._renderer.createElement("div"),this._renderer.setAttribute(this.wrapper,"class","drag-scroll-wrapper"),this._renderer.addClass(this.wrapper,"drag-scroll-container"),this.refreshWrapperDimensions(),this._renderer.setStyle(this.wrapper,"overflow","hidden"),this._renderer.setStyle(this._contentRef.nativeElement,"width","calc(100% + "+this.scrollbarWidth+")"),this._renderer.setStyle(this._contentRef.nativeElement,"height","calc(100% + "+this.scrollbarWidth+")"),this._renderer.appendChild(this._elementRef.nativeElement,this.wrapper),this._renderer.appendChild(this.wrapper,this._contentRef.nativeElement),this.adjustMarginToLastChild())},e.prototype.showScrollbar=function(){this.wrapper&&(this._renderer.setStyle(this._contentRef.nativeElement,"width","100%"),this._renderer.setStyle(this._contentRef.nativeElement,"height",this.wrapper.style.height),null!==this.parentNode&&(this.parentNode.removeChild(this.wrapper),this.parentNode.appendChild(this._contentRef.nativeElement)),this.wrapper=null,this.adjustMarginToLastChild())},e.prototype.checkScrollbar=function(){this._contentRef.nativeElement.scrollWidth<=this._contentRef.nativeElement.clientWidth?this._renderer.setStyle(this._contentRef.nativeElement,"height","100%"):this._renderer.setStyle(this._contentRef.nativeElement,"height","calc(100% + "+this.scrollbarWidth+")"),this._contentRef.nativeElement.scrollHeight<=this._contentRef.nativeElement.clientHeight?this._renderer.setStyle(this._contentRef.nativeElement,"width","100%"):this._renderer.setStyle(this._contentRef.nativeElement,"width","calc(100% + "+this.scrollbarWidth+")")},e.prototype.setScrollBar=function(){this.scrollbarHidden?this.hideScrollbar():this.showScrollbar()},e.prototype.getScrollbarWidth=function(){var e=this._renderer.createElement("div");this._renderer.setStyle(e,"visibility","hidden"),this._renderer.setStyle(e,"width","100px"),this._renderer.setStyle(e,"msOverflowStyle","scrollbar"),this._renderer.appendChild(this._document.body,e);var t=e.offsetWidth;this._renderer.setStyle(e,"overflow","scroll");var n=this._renderer.createElement("div");this._renderer.setStyle(n,"width","100%"),this._renderer.appendChild(e,n);var i=n.offsetWidth;return this._renderer.removeChild(this._document.body,e),t-i||20},e.prototype.refreshWrapperDimensions=function(){this.wrapper&&(this._renderer.setStyle(this.wrapper,"width","100%"),this._renderer.setStyle(this.wrapper,"height",this._elementRef.nativeElement.style.height||this._elementRef.nativeElement.offsetHeight+"px"))},e.prototype.scrollTo=function(e,t,n){var i=this;i.isAnimating=!0;var s=e.scrollLeft,r=t-s-this.snapOffset,o=0,l=function(){var t,h,a;o+=20,e.scrollLeft=(t=o,h=s,a=r,(t/=n/2)<1?a/2*t*t+h:-a/2*(--t*(t-2)-1)+h),o<n?i.scrollToTimer=setTimeout(l,20):setTimeout(function(){i.isAnimating=!1,i.snapAnimationFinished.emit(i.currIndex)},20)};l()},e.prototype.locateCurrentIndex=function(e){var t=this;this.currentChildWidth(function(n,i,s,r,o){t._contentRef.nativeElement.scrollLeft>=s&&t._contentRef.nativeElement.scrollLeft<=i?(i-t._contentRef.nativeElement.scrollLeft>n/2&&!t.isScrollReachesRightEnd()?(t.isAnimating||(t.currIndex=r),e&&t.scrollTo(t._contentRef.nativeElement,s,t.snapDuration)):(t.isAnimating||(t.currIndex=r+1),e&&t.scrollTo(t._contentRef.nativeElement,s+n,t.snapDuration)),o()):r+1===t._children._results.length-1&&(t.isAnimating||(t.currIndex=r+1),o())})},e.prototype.currentChildWidth=function(e){for(var t=0,n=!1,i=function(){n=!0},s=0;s<this._children._results.length&&s!==this._children._results.length-1&&!n;s++){var r=t+this._children._results[s+1]._elementRef.nativeElement.clientWidth,o=this._children._results[s]._elementRef.nativeElement.clientWidth;e(o,r,t,s,i),t+=o}},e.prototype.toChildrenLocation=function(){for(var e=this.scrollbarHidden?this.getScrollbarWidth():0,t=0;t<this.currIndex;t++)e+=this._children._results[t]._elementRef.nativeElement.clientWidth;return e},e.prototype.locateDragScrollItem=function(e){for(var t=null,n=0;n<this._children._results.length;n++)e===this._children._results[n]._elementRef.nativeElement&&(t=this._children._results[n]);return t},e.prototype.markElDimension=function(){this.wrapper?(this.elWidth=this.wrapper.style.width,this.elHeight=this.wrapper.style.height):(this.elWidth=this._elementRef.nativeElement.style.width||this._elementRef.nativeElement.offsetWidth+"px",this.elHeight=this._elementRef.nativeElement.style.height||this._elementRef.nativeElement.offsetHeight+"px");var e=this.wrapper||this.parentNode,t=e?e.clientWidth:0;this.indexBound=this.maximumIndex(t,this._children)},e.prototype.maximumIndex=function(e,t){for(var n=0,i=0,s=0;s<=t._results.length;s++){var r=t._results[t._results.length-1-s];if(!r)break;if(!((i+=r._elementRef.nativeElement.clientWidth)<e))break;n++}return t.length-n},e.prototype.isScrollReachesRightEnd=function(){return this._contentRef.nativeElement.scrollLeft+this._contentRef.nativeElement.offsetWidth>=this._contentRef.nativeElement.scrollWidth},e.prototype.adjustMarginToLastChild=function(){if(this._children&&this.hideScrollbar){var e=this._children._results[this._children._results.length-1]._elementRef.nativeElement;this.wrapper&&this._children._results.length>1?this._renderer.setStyle(e,"margin-right",this.scrollbarWidth):this._renderer.setStyle(e,"margin-right",0)}},e.decorators=[{type:t.Component,args:[{selector:"drag-scroll",template:'\n    <div class="drag-scroll-content" #contentRef>\n      <ng-content></ng-content>\n    </div>\n  ',styles:["\n    :host {\n      overflow: hidden;\n      display: block;\n    }\n    .drag-scroll-content {\n      height: 100%;\n      overflow: auto;\n      white-space: nowrap;\n    }\n    "]}]}],e.ctorParameters=function(){return[{type:t.ElementRef,decorators:[{type:t.Inject,args:[t.ElementRef]}]},{type:t.Renderer2,decorators:[{type:t.Inject,args:[t.Renderer2]}]},{type:undefined,decorators:[{type:t.Inject,args:[n.DOCUMENT]}]}]},e.propDecorators={_contentRef:[{type:t.ViewChild,args:["contentRef"]}],_children:[{type:t.ContentChildren,args:[i]}],dsInitialized:[{type:t.Output}],indexChanged:[{type:t.Output}],reachesLeftBound:[{type:t.Output}],reachesRightBound:[{type:t.Output}],snapAnimationFinished:[{type:t.Output}],scrollbarHidden:[{type:t.Input,args:["scrollbar-hidden"]}],disabled:[{type:t.Input,args:["drag-scroll-disabled"]}],xDisabled:[{type:t.Input,args:["drag-scroll-x-disabled"]}],yDisabled:[{type:t.Input,args:["drag-scroll-y-disabled"]}],xWheelEnabled:[{type:t.Input,args:["scroll-x-wheel-enabled"]}],dragDisabled:[{type:t.Input,args:["drag-disabled"]}],snapDisabled:[{type:t.Input,args:["snap-disabled"]}],snapOffset:[{type:t.Input,args:["snap-offset"]}],snapDuration:[{type:t.Input,args:["snap-duration"]}],onWheel:[{type:t.HostListener,args:["wheel",["$event"]]}],onWindowResize:[{type:t.HostListener,args:["window:resize"]}]},e}(),r=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{exports:[s,i],declarations:[s,i]}]}],e}();e.DragScrollComponent=s,e.DragScrollItemDirective=i,e.DragScrollModule=r,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-drag-scroll.umd.min.js.map