!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/common"),require("rxjs"),require("rxjs/operators"),require("@angular/core")):"function"==typeof define&&define.amd?define("ngx-carousels",["exports","@angular/common","rxjs","rxjs/operators","@angular/core"],e):e(t["ngx-carousels"]={},t.ng.common,t.rxjs,t.rxjs.operators,t.ng.core)}(this,function(t,e,s,o,i){"use strict";var n=function(){function t(t){this.templateRef=t}return t.decorators=[{type:i.Directive,args:[{selector:"ng-template[carouselItem]"}]}],t.ctorParameters=function(){return[{type:i.TemplateRef}]},t}(),r=function(){function t(){this.autochange=!1,this.animationType="none",this.period=5e3,this._activeIndex=0,this._isAnimation=!1}return t.prototype.ngAfterViewInit=function(){this.setupCarousel()},t.prototype.setupCarousel=function(){var t=this;this._subscriber&&this._subscriber.unsubscribe(),this.setItemActive(this._activeIndex),this.autochange&&(this._subscriber=s.interval(this.period).subscribe(function(){t.setItemInactive(t._activeIndex),t._activeIndex=t._activeIndex+1>=t.carouselItems.length?0:t._activeIndex+1,t.setItemActive(t._activeIndex)}))},t.prototype.selectAt=function(t){this._isAnimation||(this.setItemInactive(this._activeIndex),this._activeIndex=t>=this.carouselItems.length?this.carouselItems.length-1:t,this._activeIndex=t<0?0:t,this.setItemActive(this._activeIndex),this.setupCarousel())},t.prototype.next=function(){this._isAnimation||(this.setItemInactive(this._activeIndex),this._activeIndex=this._activeIndex+1>=this.carouselItems.length?0:this._activeIndex+1,this.setItemActive(this._activeIndex),this.setupCarousel())},t.prototype.prev=function(){this._isAnimation||(this.setItemInactive(this._activeIndex),this._activeIndex=this._activeIndex-1<0?this.carouselItems.length-1:this._activeIndex-1,this.setItemActive(this._activeIndex),this.setupCarousel())},t.prototype.setItemActive=function(i){var t=this,e=this.carouselItems.find(function(t,e){return e==i});switch(this.animationType){case"fade":e&&(this._isAnimation=!0,e.nativeElement.classList.add("active","fade-in"),s.interval(1005).pipe(o.first()).subscribe(function(){e.nativeElement.classList.remove("fade-in"),t._isAnimation=!1}));break;default:e&&e.nativeElement.classList.add("active")}},t.prototype.setItemInactive=function(i){var t=this.carouselItems.find(function(t,e){return e==i});switch(this.animationType){case"fade":t&&(t.nativeElement.classList.add("fade-out"),s.interval(1005).pipe(o.first()).subscribe(function(){t.nativeElement.classList.remove("active","fade-out")}));break;default:t&&t.nativeElement.classList.remove("active")}},t.decorators=[{type:i.Component,args:[{selector:"carousel",template:'<div class="carousel" [style.position]="animationType == \'none\' ? \'static\' : \'relative\'">\r\n    <ng-template ngFor let-item [ngForOf]="carouselInners">\r\n        <div #carouselItems class="carousel__item">\r\n            <ng-template [ngTemplateOutlet]="item.templateRef"></ng-template>\r\n        </div>\r\n    </ng-template>\r\n</div>',styles:[".carousel__item{display:none;transition:transform 1s ease-in-out,opacity 1s ease-in-out,-webkit-transform 1s ease-in-out}.carousel__item.active{display:block}.carousel__item.fade-out{position:absolute;top:0;right:0;bottom:0;left:0;-webkit-animation:1s linear fadeOut;animation:1s linear fadeOut}.carousel__item.fade-in{-webkit-animation:1s linear fadeIn;animation:1s linear fadeIn}@-webkit-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes fadeOut{0%{opacity:1}100%{opacity:0}}@keyframes fadeOut{0%{opacity:1}100%{opacity:0}}"]}]}],t.propDecorators={carouselInners:[{type:i.ContentChildren,args:[n]}],carouselItems:[{type:i.ViewChildren,args:["carouselItems"]}],autochange:[{type:i.Input}],animationType:[{type:i.Input}],period:[{type:i.Input}]},t}();function a(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,s=i.call(t),o=[];try{for(;(void 0===e||0<e--)&&!(n=s.next()).done;)o.push(n.value)}catch(a){r={error:a}}finally{try{n&&!n.done&&(i=s["return"])&&i.call(s)}finally{if(r)throw r.error}}return o}var c=function(){function t(t){this.templateRef=t}return t.decorators=[{type:i.Directive,args:[{selector:"ng-template[rotateCarouselItem]"}]}],t.ctorParameters=function(){return[{type:i.TemplateRef}]},t}(),l=function(){function t(){this.rotationStart=new i.EventEmitter,this.rotationEnd=new i.EventEmitter,this.width="300px",this.height="200px",this.depth="510px",this.period=3500,this.direction="forward",this._activeIndex=0}return t.prototype.ngAfterContentInit=function(){this.calcItemsAngle(),this.setupRotation()},t.prototype.ngOnChanges=function(){this.setupRotation()},t.prototype.calcItemsAngle=function(){var e=this;this._angleStep=360/this.rotateItems.length;var i=0;this.rotateItems.forEach(function(t){t.angle=i,i+=e._angleStep})},t.prototype.setupRotation=function(){if(Number.isNaN(this.period%1)){var t=this.period.replace(/\'/g,"").split(/([0-9]*\.?[0-9])/);this._period="s"==t[2]?1e3*parseInt(t[1]):parseInt(t[1])}else this._period=parseInt(this.period);this._rotationTimerSubscription&&this._rotationTimerSubscription.unsubscribe(),this._rotationTimerSubscription=this.setRotationTimer()},t.prototype.calcHeight=function(){var t=Math.max.apply(Math,function i(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t}([null],this.rotateItems.map(function(t){return t.templateRef.elementRef.nativeElement.clientHeight})));this.height||(this.height=t+"px")},t.prototype.onRotationStart=function(){this.rotationStart.emit(this._activeIndex)},t.prototype.onRotateEnd=function(t){0==this._activeIndex&&(this.carouselInner.nativeElement.style.transition="none",this.carouselInner.nativeElement.style.transform="rotateY(0deg)"),this.rotationEnd.emit(this._activeIndex)},t.prototype.getCarouselStyle=function(){return{width:this.width,height:this.height,transform:"translateZ(-"+this.depth+")"}},t.prototype.getItemStyle=function(t){var e=this.depth;return{transform:"rotateY("+t.angle+"deg) translateZ("+e+")"}},t.prototype.selectAt=function(t){this._rotationTimerSubscription.unsubscribe(),this.carouselInner.nativeElement.style.transform="rotateY("+t*this._angleStep+"deg)",this._rotationTimerSubscription=this.setRotationTimer()},t.prototype.setRotationTimer=function(){var i=this;return s.timer(0,this._period).subscribe(function(t){var e;i._activeIndex=t%i.rotateItems.length,1==i._activeIndex&&(i.carouselInner.nativeElement.style.transition="transform "+i._period/2+"ms ease-in-out"),e=0<t&&0==i._activeIndex?i.rotateItems.length*i._angleStep*("forward"==i.direction?-1:1):i._activeIndex*i._angleStep*("forward"==i.direction?-1:1),i.carouselInner.nativeElement.style.transform="rotateY("+e+"deg)",i.onRotationStart()})},t.decorators=[{type:i.Component,args:[{selector:"rotate-carousel",template:'<figure class="carousel">\r\n    <div class="carousel__content" [ngStyle]="getCarouselStyle()">\r\n        <div #carouselInner class="carousel__inner" (transitionend)="onRotateEnd($event)">\r\n            <ng-template ngFor let-item [ngForOf]="rotateItems">\r\n                <div class="carousel__item" [ngStyle]="getItemStyle(item)">\r\n                    <ng-template [ngTemplateOutlet]="item.templateRef"></ng-template>\r\n                </div>\r\n            </ng-template>\r\n        </div>\r\n    </div>\r\n</figure>',styles:[":host{width:100%}.carousel{display:flex;justify-content:center;-webkit-perspective:1000px;perspective:1000px}.carousel__content{-webkit-transform:translateZ(-40vw);transform:translateZ(-40vw);-webkit-transform-style:preserve-3d;transform-style:preserve-3d}.carousel__inner{height:100%;-webkit-transform-style:preserve-3d;transform-style:preserve-3d}.carousel__item{display:flex;align-items:center;position:absolute;height:100%;width:100%}.carousel__item img{height:100%;width:100%;-o-object-fit:cover;object-fit:cover;-o-object-position:center;object-position:center;border-radius:15px}"]}]}],t.propDecorators={rotateItems:[{type:i.ContentChildren,args:[c]}],carouselInner:[{type:i.ViewChild,args:["carouselInner"]}],rotationStart:[{type:i.Output}],rotationEnd:[{type:i.Output}],width:[{type:i.Input}],height:[{type:i.Input}],depth:[{type:i.Input}],period:[{type:i.Input}],direction:[{type:i.Input}]},t}(),p=function(){function t(t){this.templateRef=t}return t.decorators=[{type:i.Directive,args:[{selector:"ng-template[ringCarouselItem]"}]}],t.ctorParameters=function(){return[{type:i.TemplateRef}]},t}(),u=function(){function t(){this.transitionStart=new i.EventEmitter,this.transitionEnd=new i.EventEmitter,this.ringColor="white",this.ringsCount=12,this.ringsDelay=130,this.ringsDuration=800,this.expandOnTransition=!0,this.enableControl=!0,this._strokeWidthStep=0,this._isExpanding=!1,this._isCollapsing=!1}return t.prototype.ngAfterContentInit=function(){this._activeItem=this.carouselItems.first,this._activeIndex=0},t.prototype.ngOnChanges=function(){"string"==typeof this.ringsCount&&(this.ringsCount=parseInt(this.ringsCount))},t.prototype.selectAt=function(t,e){var i,n;void 0===e&&(e=null),this._activeIndex=t,e?(i=e.layerX,n=e.layerY):(n=this.carouselRef.nativeElement.clientHeight/2,i=this.carouselRef.nativeElement.clientWidth/2),this.showRings(i,n,t)},t.prototype.next=function(t){void 0===t&&(t=null),this._activeIndex=this._activeIndex+1<this.carouselItems.length?this._activeIndex+1:0,this.selectAt(this._activeIndex,t)},t.prototype.prev=function(t){void 0===t&&(t=null),this._activeIndex=0<=this._activeIndex-1?this._activeIndex-1:this.carouselItems.length-1,this.selectAt(this._activeIndex,t)},t.prototype.showRings=function(t,e,n){var r=this;this.calcRingsWidth(t,e),this._cx=t,this._cy=e,this._isExpanding=!0;var i=s.interval(this.ringsDelay).pipe(o.take(this.ringsCount));i.subscribe(function(i){r.transitionStart.emit(n),r.expandAnimations.find(function(t,e){return i==e}).nativeElement.beginElement()}),i.pipe(o.last()).subscribe(function(t){s.interval(r.ringsDuration).pipe(o.first()).subscribe(function(t){r._activeItem=r.carouselItems.find(function(t,e){return e==n}),r._isExpanding=!1,r.hideRings()})})},t.prototype.hideRings=function(){var e=this;this._isCollapsing=!0;var t=s.interval(this.ringsDelay).pipe(o.take(this.ringsCount));t.subscribe(function(i){e.collapseAnimations.find(function(t,e){return i==e}).nativeElement.beginElement()}),t.pipe(o.last()).subscribe(function(t){s.interval(e.ringsDuration).pipe(o.first()).subscribe(function(t){e._isCollapsing=!1,e.transitionEnd.emit(e._activeIndex)})})},t.prototype.calcRingsWidth=function(t,e){var i,n=this.carouselRef.nativeElement.clientWidth,r=this.carouselRef.nativeElement.clientHeight,s=0<r/2-e,o=0<n/2-t;i=s&&o?Math.sqrt(Math.pow(r-e,2)+Math.pow(n-t,2)):s&&!o?Math.sqrt(Math.pow(r-e,2)+Math.pow(t,2)):!s&&o?Math.sqrt(Math.pow(e,2)+Math.pow(n-t,2)):Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),this._strokeWidthStep=i/(this.ringsCount-1)},t.decorators=[{type:i.Component,args:[{selector:"ring-carousel",template:'<div #carousel class="carousel">\r\n    <div class="carousel__inner" [style.transform]="expandOnTransition && (_isExpanding || _isCollapsing) ? \'scale(1.2)\' : \'none\'">\r\n        <ng-template [ngTemplateOutlet]="_activeItem.templateRef"></ng-template>\r\n    </div>\r\n    <div *ngIf="enableControl" class="control">\r\n        <div class="left" (click)="prev($event)"></div>\r\n        <div class="right" (click)="next($event)"></div>\r\n    </div>\r\n    <div class="circles" *ngIf="_isExpanding || _isCollapsing">\r\n        <svg>\r\n            <ng-template ngFor [ngForOf]="\' \'.repeat(ringsCount).split(\'\')" let-i="index">\r\n                <svg:circle [attr.cx]="_cx" [attr.cy]="_cy" [attr.r]="_strokeWidthStep * i + 1" fill="none" [attr.stroke]="ringColor" stroke-width="0">\r\n                    <animate #expandSvgAnimations attributeName="stroke-width" begin="click" [attr.dur]="ringsDuration + \'ms\'" from="0" [attr.to]="_strokeWidthStep + 1" fill="freeze" />\r\n                    <animate #collapseSvgAnimations attributeName="stroke-width" begin="click" [attr.dur]="ringsDuration + \'ms\'" [attr.from]="_strokeWidthStep + 1" to="0" fill="freeze" />\r\n                </svg:circle>\r\n            </ng-template>\r\n        </svg>\r\n    </div>\r\n</div>\r\n\r\n',styles:[":host{width:100%}.carousel{position:relative;overflow:hidden}.carousel__inner{transition:transform .8s;transition:transform .8s,-webkit-transform .8s;z-index:1}.control{display:flex;position:absolute;top:0;right:0;bottom:0;left:0;z-index:2}.control .left,.control .right{height:100%;flex:1;cursor:pointer}.circles{position:absolute;top:0;right:0;bottom:0;left:0;z-index:3}.circles svg{height:100%;width:100%}"]}]}],t.propDecorators={carouselItems:[{type:i.ContentChildren,args:[p]}],carouselRef:[{type:i.ViewChild,args:["carousel"]}],expandAnimations:[{type:i.ViewChildren,args:["expandSvgAnimations"]}],collapseAnimations:[{type:i.ViewChildren,args:["collapseSvgAnimations"]}],transitionStart:[{type:i.Output}],transitionEnd:[{type:i.Output}],ringColor:[{type:i.Input}],ringsCount:[{type:i.Input}],ringsDelay:[{type:i.Input}],ringsDuration:[{type:i.Input}],expandOnTransition:[{type:i.Input}],enableControl:[{type:i.Input}]},t}(),h=function(){function t(){}return t.decorators=[{type:i.NgModule,args:[{declarations:[r,n,l,c,u,p],imports:[e.CommonModule],exports:[r,n,l,c,u,p]}]}],t}();t.CarouselModule=h,t.RingCarouselComponent=u,t.RotateCarouselComponent=l,t.RingCarouselItemDirective=p,t.RotateCarouselItemDirective=c,t.ɵb=n,t.ɵa=r,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-carousels.umd.min.js.map